<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Logical Volume Management (LVM) | sferoblog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="" />
    <meta name="author" content="Alex Monroy" />
    <meta name="kittycheck_rumble" content="true" />
    <meta name="kittycheck_position" content="top=60,right=60" />

    <!-- Le styles -->
    <link rel="stylesheet" href="https://xmonroya.github.io/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="https://xmonroya.github.io/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="https://xmonroya.github.io/theme/css/font-awesome.css" rel="stylesheet">
    <link href="https://xmonroya.github.io/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="https://xmonroya.github.io/theme/img/favicon.ico">
    <link rel="apple-touch-icon" href="https://xmonroya.github.io/theme/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://xmonroya.github.io/theme/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://xmonroya.github.io/theme/img/apple-touch-icon-114x114.png">

    <link href="https://xmonroya.github.io/" type="application/atom+xml" rel="alternate" title="sferoblog ATOM Feed" />
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="https://xmonroya.github.io/index.html">sferoblog </a>
          <div class="nav-collapse">
            <ul class="nav">
                <li class="divider-vertical"></li>
                <li >
                  <a href="https://xmonroya.github.io/category/linux.html">
						        <i class="icon-folder-open icon-large"></i>Linux
					         </a>
                </li>
                <li class="active">
                  <a href="https://xmonroya.github.io/category/lvm.html">
						        <i class="icon-folder-open icon-large"></i>LVM
					         </a>
                </li>
              <ul class="nav pull-right">
                    <li><a href="https://xmonroya.github.io/"><i class="icon-th-list"></i>Archives</a></li>
              </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="span8" id="content">
<div class="row">
    <div class="span2">
        <div class="well">
<footer class="post-info">
<abbr class="published" title="2030-07-08T10:00:00-04:00">
    <i class="icon-calendar"></i>&nbsp;lun 08 julio 2030
</abbr>
<br/><a href="https://xmonroya.github.io/author/alex-monroy.html"><i class="icon-user"></i>&nbsp;Alex Monroy</a>


<br/>
	&nbsp;&nbsp;<a href="https://xmonroya.github.io/tag/lvm.html" class="label"><i class="icon-tag"></i>&nbsp;LVM</a>
	&nbsp;&nbsp;<a href="https://xmonroya.github.io/tag/linux.html" class="label"><i class="icon-tag"></i>&nbsp;linux</a>
</footer><!-- /.post-info -->        </div>
    </div>
    <div class="span6">
<section id="content" class="well">
    <article>
        <header>
            <h1>
                <a href=""
                        rel="bookmark"
                        title="Permalink to Logical Volume Management (LVM)">
                        Logical Volume Management (LVM)
                </a>
            </h1>
        </header>
        <div class="entry-content">

        <p>LVM es un sistema de gestión del almacenamiento que te libera de las limitaciones de las particiones de disco fijas, ofreciendo una manera mucho más flexible y dinámica de organizar y redimensionar tu espacio.</p>
<h2>¿Por qué usarlo?</h2>
<p>Es común que el espacio en disco se divida para alojar distintos sistemas de archivos. Normalmente, cada división corresponde a un disco o una partición de tamaño fijo.</p>
<p>Estas particiones no son fáciles de redimensionar. Si se necesita más espacio, en el peor de los casos, hay que migrar los datos a un disco de mayor capacidad. Ambos procesos implican interrupciones en el servidor y sus servicios.</p>
<p>El sistema LVM resuelve este problema al introducir una capa de abstracción. En lugar de trabajar con particiones fijas, crea "particiones virtuales" conocidas como volúmenes lógicos (LV). Estos LV pueden extenderse a través de varios discos físicos o particiones y, además, permite ser redimensionados sin necesidad de reiniciar servidores o servicios. Así entre las ventajas de LVM tenemos:</p>
<ul>
<li>Redimensionamiento dinámico: Expande o contrae volúmenes lógicos sin desmontar o reiniciar el sistema. Esto es crucial para servidores y aplicaciones que requieren un alto uptime.</li>
<li>Asignación flexible: Agrupa almacenamiento de diferentes discos duros y lo asigna a volúmenes lógicos según sea necesario, evitando espacio desperdiciado.</li>
<li>Gestión simplificada: Administra el almacenamiento utilizando nombre de volúmenes lógicos ( por ejemplo, "databases", "webserver") en lugar de nombres complejos de dispositivos como /dev/sda1</li>
<li>Funciones avanzadas: LVM ofrece funciones como snapshots (para copias de seguridad o pruebas), striping (para rendimiento) y mirroring (para redundancia), que no son fácilmente alcanzables con particiones tradicionales.</li>
</ul>
<h2>Componentes clave de LVM</h2>
<p>LVM se estructura apilando estos tres componentes:</p>
<ul>
<li>Volúmenes físicos (<strong>PV, Physical Volume</strong>): Estos son la base de LVM. Un PV puede ser un disco duro, una partición de un disco duro u otro dispositivo de bloque. Para marcar una partición o disco como un PV se utiliza el comando pvcreate. Los PV usan como nombres los del dispositivo o partición.</li>
<li>Grupos de volúmenes (<strong>VG, Volume Group</strong>): Los PV se agrupan en VG, que actúan como un gran espacio de almacenamiento. El comando vgcreate crea un VG.</li>
<li>Volúmenes lógicos (<strong>LV, Logical Volume</strong>): Los LV se extraen del VG. Estos son los volúmenes con los que interactúan tu sistema operativo y las aplicaciones. Puedes formatearlos con un sistema de archivos(como EXT4 o XFS) y montarlos como particiones regulares. El comando lvcreate se utiliza para crear LV.</li>
</ul>
<p><img alt="Logical Volume Management" src="/images/lvm-system.png"></p>
<p>Veamos un ejemplo sencillo. Imagina un servidor web con dos discos duros: /dev/sda (30GB) y /dev/sdb (10GB). Queremos organizar el almacenamiento así:</p>
<ul>
<li>Una partición de 20GB para el sitio web.</li>
<li>Una partición de 10GB para la base de datos.</li>
<li>Una partición de 10GB para los logs del sitio web.</li>
</ul>
<p>Normalmente, podríamos particionar /dev/sda en 20GB (sitio web) y 10GB (base de datos), y usar /dev/sdb para los logs. Sin embargo, ¿qué pasa si después de un año la base de datos casi agota sus 10GB? Para ampliarla, tendríamos que moverla a un disco más grande, quizás un /dev/sdc, lo que implica mucho trabajo.</p>
<h3>La solución con LVM</h3>
<p>Si usamos LVM, la situación cambia. Podemos crear un Grupo de Volúmenes (VG) de 40GB que combine ambos discos. A partir de ese VG, crearíamos los Volúmenes Lógicos (LV) necesarios para el sitio web, la base de datos y los logs.</p>
<p>¿Necesitas más espacio para la base de datos en el futuro? Simplemente insertas un tercer disco (/dev/sdc), lo añades al VG, y luego asignas ese nuevo espacio al LV de la base de datos. Después, solo queda redimensionar el sistema de archivos asociado. Todo esto sin necesidad de bajar los servicios (excepto para insertar físicamente el nuevo disco).</p>
<p>Bien, y ¿Cómo creamos un sistema de archivos basado en LVM? Veamos como:</p>
<p>a. Crear los PV asociados a los discos:</p>
<div class="highlight"><pre><span></span><code>pvcreate<span class="w"> </span>/dev/sda
pvcreate<span class="w"> </span>/dev/sdb
</code></pre></div>

<p>Tenemos ahora dos Physical Volume llamados /dev/sda y /dev/sdb.</p>
<p>b. Crear un VG llamado <strong>webserver_vg</strong> a partir de los PV recién creados</p>
<div class="highlight"><pre><span></span><code>vgcreate<span class="w"> </span>webserver_vg<span class="w"> </span>/dev/sda<span class="w"> </span>/dev/sdb
</code></pre></div>

<p>c. Crear los Volumenes lógicos que necesitamos:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Para los archivos del sitio web</span>
lvcreate<span class="w"> </span>-L<span class="w"> </span>20G<span class="w"> </span>-n<span class="w"> </span>websites<span class="w"> </span>webserver_vg

<span class="c1">#Para los archivos de la base de datos</span>
lvcreate<span class="w"> </span>-L<span class="w"> </span>10G<span class="w"> </span>-n<span class="w"> </span>database<span class="w"> </span>webserver_vg

<span class="c1">#Para los archivos de registro, utilizando el espacio restante</span>
lvcreate<span class="w"> </span>-L<span class="w"> </span>10GB<span class="w"> </span>-n<span class="w"> </span>logs<span class="w"> </span>webserver_vg
</code></pre></div>

<p>Ahora tienes tres volúmenes lógicos llamados: "website", "database" y "logs", que puedes formatear y montar.</p>
<hr>
<h2>En Conclusión</h2>
<p>LVM simplifica las tareas de administración de almacenamiento para los administradores de sistemas al ofrecer:</p>
<ul>
<li><strong>Expansión más sencilla:</strong> Agregar y expandir el almacenamiento se vuelve un proceso directo.</li>
<li><strong>Menor tiempo de inactividad:</strong> Muchas operaciones se pueden realizar en línea, lo que minimiza las interrupciones del servicio.</li>
<li><strong>Flexibilidad:</strong> LVM brinda mayor control sobre cómo se asigna el almacenamiento, facilitando la adaptación a los requisitos cambiantes.</li>
<li><strong>Protección de datos:</strong> Funciones como los <em>snapshots</em> y el <em>mirroring</em> mejoran las capacidades de protección de datos.</li>
</ul>
<h3>¿Dónde es particularmente útil LVM?</h3>
<p>LVM es especialmente valioso en los siguientes escenarios:</p>
<ul>
<li><strong>Entornos de servidor:</strong> Es clave donde la flexibilidad, el tiempo de actividad y la utilización eficiente del almacenamiento son fundamentales.</li>
<li><strong>Virtualización:</strong> Se usa frecuentemente para administrar el almacenamiento de máquinas virtuales, permitiendo un fácil redimensionamiento y la creación de <em>snapshots</em> de discos virtuales.</li>
<li><strong>Sistemas con crecimiento de almacenamiento:</strong> LVM facilita la adaptación a las demandas crecientes de almacenamiento sin necesidad de complejos redimensionamientos.</li>
</ul>
<hr>
<p>En resumen, LVM es una tecnología potente y versátil que mejora significativamente la administración del almacenamiento en sistemas Linux. Al comprender sus conceptos y ventajas principales, podrás lograr una mayor flexibilidad y eficiencia en la gestión de tu espacio en disco.</p>
        </div><!-- /.entry-content -->
    </article>
</section>
</div>
</div>
        </div><!--/span-->
        <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><div><i class="icon-external-link"></i><a href="https://getpelican.com/">Pelican</a></div></li>
    <li><div><i class="icon-external-link"></i><a href="https://www.python.org/">Python.org</a></div></li>
    <li><div><i class="icon-external-link"></i><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></div></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
    <li><a href="https://www.linkedin.com/in/xmonroy/"><i class="icon-LinkedIn-sign icon-large"></i>LinkedIn</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="https://xmonroya.github.io/category/linux.html">
    <i class="icon-folder-open icon-large"></i>Linux
</a>
</li>
<li>
<a href="https://xmonroya.github.io/category/lvm.html">
    <i class="icon-folder-open icon-large"></i>LVM
</a>
</li>



</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

    </div><!--/.fluid-container-->


    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://xmonroya.github.io/theme/js/jquery-1.7.2.min.js"></script>
    <script src="https://xmonroya.github.io/theme/js/bootstrap.min.js"></script>
  </body>
</html>